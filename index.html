<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#000000">
  <title>SoftWake</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icons/icon.svg">

  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- ═══════════════════════════════════════════ -->
  <!-- EKRAN 1: ALARM LİSTESİ                     -->
  <!-- ═══════════════════════════════════════════ -->
  <div id="screen-list" class="screen active">
    <header class="screen-header">
      <h1>Alarm</h1>
      <button id="btn-add-alarm" class="header-btn" aria-label="Alarm ekle">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
    </header>

    <div id="alarm-list" class="alarm-list">
      <!-- JS tarafından doldurulacak -->
    </div>

    <div id="empty-state" class="empty-state">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" opacity="0.3">
        <circle cx="12" cy="13" r="8"/>
        <path d="M12 9v4l2 2"/>
        <path d="M5 3L2 6"/>
        <path d="M22 6l-3-3"/>
      </svg>
      <p class="empty-title">Henüz alarm yok</p>
      <p class="empty-sub">Yumuşak bir uyanış için alarm ekleyin</p>
      <button id="btn-add-empty" class="btn-primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        Alarm Ekle
      </button>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- EKRAN 2: ALARM EKLE / DÜZENLE              -->
  <!-- ═══════════════════════════════════════════ -->
  <div id="screen-edit" class="screen">
    <header class="screen-header">
      <button id="btn-cancel" class="header-text-btn">İptal</button>
      <h2 id="edit-title">Alarm Ekle</h2>
      <button id="btn-save" class="header-text-btn accent">Kaydet</button>
    </header>

    <!-- Saat Seçici (iOS Wheel Style) -->
    <div class="picker-container">
      <div class="picker-highlight"></div>
      <div class="wheel-group">
        <div id="picker-hour" class="wheel" role="listbox" aria-label="Saat"></div>
        <div class="picker-separator">:</div>
        <div id="picker-minute" class="wheel" role="listbox" aria-label="Dakika"></div>
      </div>
    </div>

    <!-- Ayarlar -->
    <div class="settings-card">
      <!-- Tekrar -->
      <button id="btn-repeat" class="settings-row" type="button">
        <span class="settings-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/>
            <polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/>
          </svg>
        </span>
        <span class="settings-label">Tekrar</span>
        <span id="repeat-value" class="settings-value">Bir kez</span>
        <span class="settings-chevron">›</span>
      </button>

      <!-- Tekrar Seçici (gizli, açılır) -->
      <div id="repeat-picker" class="repeat-picker hidden">
        <div class="preset-chips">
          <button class="chip" data-preset="everyday">Her Gün</button>
          <button class="chip" data-preset="weekdays">Hafta İçi</button>
          <button class="chip" data-preset="weekends">Hafta Sonu</button>
        </div>
        <div class="day-list">
          <button class="day-toggle" data-day="1"><span>Pazartesi</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="2"><span>Salı</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="3"><span>Çarşamba</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="4"><span>Perşembe</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="5"><span>Cuma</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="6"><span>Cumartesi</span><span class="check-icon hidden">✓</span></button>
          <button class="day-toggle" data-day="0"><span>Pazar</span><span class="check-icon hidden">✓</span></button>
        </div>
      </div>

      <div class="settings-divider"></div>

      <!-- Başlangıç Tarihi -->
      <div class="settings-row">
        <span class="settings-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
        </span>
        <span class="settings-label">Başlangıç Tarihi</span>
        <input id="start-date" type="date" class="settings-date-input">
      </div>

      <div class="settings-divider"></div>

      <!-- Alarm Tipi (sabit) -->
      <div class="settings-row no-action">
        <span class="settings-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 10v3c0 2 3 3 5 3h2l4 4V6L9 10H7c-2 0-5 1-5 3z"/>
            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
          </svg>
        </span>
        <span class="settings-label">Alarm Tipi</span>
        <span class="settings-value">Yumuşak Uyanış – 5 dk</span>
      </div>
    </div>

    <!-- Sil butonu (düzenleme modunda) -->
    <button id="btn-delete" class="btn-delete hidden">Alarmı Sil</button>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- EKRAN 3: AKTİF ALARM                       -->
  <!-- ═══════════════════════════════════════════ -->
  <div id="screen-active" class="screen">
    <div class="active-content">
      <div class="active-time" id="active-time">00:00</div>
      <div class="active-phase" id="active-phase">Hazırlanıyor...</div>

      <div class="progress-ring-container">
        <svg class="progress-ring" width="220" height="220" viewBox="0 0 220 220">
          <circle class="progress-bg" cx="110" cy="110" r="100" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="4"/>
          <circle id="progress-arc" class="progress-arc" cx="110" cy="110" r="100"
                  fill="none" stroke="url(#gradient)" stroke-width="4"
                  stroke-linecap="round" stroke-dasharray="628.32" stroke-dashoffset="628.32"
                  transform="rotate(-90 110 110)"/>
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="rgba(255,149,0,0.4)"/>
              <stop offset="100%" stop-color="#FF9500"/>
            </linearGradient>
          </defs>
        </svg>
        <div class="progress-center">
          <div class="remaining-time" id="remaining-time">5:00</div>
          <div class="remaining-label">kalan</div>
        </div>
      </div>

      <button id="btn-stop" class="btn-stop">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <rect x="6" y="6" width="12" height="12" rx="2"/>
        </svg>
        <span>Kapat</span>
      </button>
    </div>
  </div>

  <!-- Scripts (sıralı — modül yok, file:// uyumlu) -->
  <script src="js/store.js"></script>
  <script src="js/engine.js"></script>
  <script src="js/picker.js"></script>
  <script src="js/app.js"></script>

  <!-- Service Worker (PWA offline + kurulum) -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').catch(function () {});
    }
  </script>
</body>
</html>
